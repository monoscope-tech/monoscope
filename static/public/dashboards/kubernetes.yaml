title: Kubernetes Cluster
icon: kubernetes
preview: /public/assets/svgs/screens/http-stats.svg
description: Monitor Kubernetes cluster health, pod status, resource usage, and deployment metrics
refresh_interval: 60s
widgets:
  - type: group
    title: Cluster Overview
    layout: { w: 6, h: 5 }
    children:
      - type: 'timeseries_stat'
        title: 'Total Pods'
        icon: server
        query: name=="k8s.pod.phase" | summarize count(distinct(attributes.k8s.pod.uid)) by bin_auto(timestamp)
        unit: pods
        eager: true
        layout: { w: 4, h: 2 }

      - type: 'stat'
        title: 'Running Pods'
        icon: circle-play
        query: name=="k8s.pod.phase" AND attributes.phase=="Running" | summarize count(distinct(attributes.k8s.pod.uid))
        unit: pods
        eager: true
        layout: { w: 4, h: 2 }

      - type: 'stat'
        title: 'Node Count'
        icon: server
        query: name=="k8s.node.condition" | summarize count(distinct(attributes.k8s.node.name))
        unit: nodes
        eager: true
        layout: { w: 4, h: 2 }

  - type: 'timeseries'
    title: 'Pod Phase Distribution'
    query: name=="k8s.pod.phase" | summarize count() by bin_auto(timestamp), attributes.phase
    layout: { w: 6, h: 4 }

  - type: 'timeseries'
    title: 'CPU Usage by Namespace (cores)'
    query: name=="k8s.pod.cpu.usage" | summarize sum(value) by bin_auto(timestamp), attributes.k8s.namespace.name
    unit: cores
    layout: { w: 6, h: 4 }

  - type: 'timeseries'
    title: 'Memory Usage by Namespace (GB)'
    query: name=="k8s.pod.memory.usage" | summarize sum(value) / 1073741824 by bin_auto(timestamp), attributes.k8s.namespace.name
    unit: GB
    layout: { w: 6, h: 4 }

  - type: 'timeseries'
    title: 'Container Restart Count'
    theme: 'roma'
    query: name=="k8s.container.restarts" | summarize sum(value) by bin_auto(timestamp), attributes.k8s.container.name, attributes.k8s.namespace.name
    layout: { w: 6, h: 4 }

  - type: 'timeseries'
    title: 'Network I/O (MB/s)'
    query: name=~"k8s.pod.network.(rx|tx)" | summarize rate(sum(value)) / 1048576 by bin_auto(timestamp), name, attributes.k8s.namespace.name
    unit: MB/s
    layout: { w: 6, h: 4 }

  - type: 'timeseries'
    title: 'Deployment Replicas'
    query: name=="k8s.deployment.desired" | summarize avg(value) by bin_auto(timestamp), attributes.k8s.deployment.name
    layout: { w: 6, h: 4 }

  - type: 'timeseries'
    title: 'Node CPU Utilization (%)'
    query: name=="k8s.node.cpu.utilization" | summarize avg(value) * 100 by bin_auto(timestamp), attributes.k8s.node.name
    unit: '%'
    layout: { w: 6, h: 4 }

  - type: 'timeseries'
    title: 'Persistent Volume Usage (%)'
    query: name=="k8s.volume.inodes.used" AND name=="k8s.volume.inodes" | summarize (sum(k8s.volume.inodes.used) / sum(k8s.volume.inodes)) * 100 by bin_auto(timestamp), attributes.k8s.persistentvolumeclaim.name
    unit: '%'
    layout: { w: 6, h: 4 }