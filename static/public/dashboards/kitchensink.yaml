title: "Kitchen Sink Dashboard"
refresh_interval: 60s
time_range:
  since: 6h 
  from: now-6h
  to: now
variables:
  - name: airport
    type: query
    label: "Airport"
    query: method == "GET" 
    default: "JFK"

  - name: airline
    type: dropdown
    label: "Airline"
    options: ["AA", "DL", "UA", "SW"]
    default: "AA"

  - name: start_time
    type: datetime
    label: "Start Time"
    default: "now-6h"

  - name: end_time
    type: datetime
    label: "End Time"
    default: "now"

widgets:
  - type: "timeseries"
    title: "GET requests"
    query: method == "GET" 
    layout: { w: 3, h: 4 }

  - type: "timeseries"
    title: "POST requests"
    query: method == "POST" 
    layout: { w: 9, h: 2 }

  - type: "timeseries"
    title: "POST requests 2"
    query: method == "POST" 
    layout: { w: 9, h: 2 }

  - type: "timeseries"
    title: "POST requests 2"
    layout: { w: 9, h: 2 }
    dataset:
      source:
        'time': [1731528000, 1731531600, 1731535200, 1731538800]
        '0': [66, 66, 66, 66]
        '200': [431, 374, 410, 402]
        '201': [24, 24, 24, 24]
        '304': [null, null, null, null]
        '308': [110, 115, 120, 125]

  # - type: "timeseries"
  #   id: "xxx"
  #   title: "POST requests"
  #   sql: select * from x where y 
  #   layout: { w: 6, h: 4, x: 0, y: 0 }

  # - type: "timeseries"
  #   title: "POST requests"
  #   layout: { w: 6, h: 2 }
  #   x_axis: 
  #     label: "Bla Bla"
  #     data: [1731528000, 1731531600, 1731535200, 1731538800]
  #   y_axis: 
  #     label: "Average Delay (min)"
  #     series: 
  #       - title: ""
  #         data: [1, 2, 3, 4] 
  #         style: {color: "#000"}

  # - type: group
  #   title: Group title
  #   widgets: 
  #     - type: "table"
  #       title: "Top Airlines by Delayed Flights"
  #       query: method == "GET" 
  #       layout: { x: 6, y: 0, w: 6, h: 4 }

  #     - type: "number"
  #       title: "Total Flights"
  #       sql: method == "POST" 
  #       layout: { x: 0, y: 4, w: 3, h: 2 }
  #       unit: "count"

  # - type: "scatter"
  #   title: "Flight Duration by Airline"
  #   query: source=logs level=error | timechart count()
  #   layout: { x: 3, y: 4, w: 6, h: 4 }
  #   x_axis_label: "Airline"
  #   y_axis_label: "Avg Duration (min)"

  # - type: "log_stream"
  #   title: "Recent Logs"
  #   sql: |
  #     SELECT time, host, message
  #     FROM logs
  #     WHERE time BETWEEN '{{variables.start_time}}' AND '{{variables.end_time}}'
  #     ORDER BY time DESC
  #   layout: { x: 0, y: 8, w: 12, h: 4 }
  #   columns: ["time", "host", "message"]

  # - type: "pie"
  #   title: "Flight Distribution by Airport"
  #   query: |
  #     SELECT airport, COUNT(*) AS flights
  #     FROM flights
  #     WHERE time BETWEEN '{{variables.start_time}}' AND '{{variables.end_time}}'
  #     GROUP BY airport
  #   layout: { x: 6, y: 12, w: 6, h: 4 }
  #   legend: true
  #   theme: roma
